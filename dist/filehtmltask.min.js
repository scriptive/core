/*!
    fileHtmltask -- html Template task
    Version 1.0.1
    https://khensolomon.github.io/let/filehtmltask
    (c) 2016
*/
!function(o){"use strict";window[o]=function(io){var os=io?io:o,json={},panelID="l1121",textareaID="l1122";window[os]=this;var visualTask={style:function(){var scriptObj="script[id=o]".replace("o",o).byAttrName();if(scriptObj){var scriptPath=scriptObj.src,scriptUrl=scriptPath.substr(0,scriptPath.lastIndexOf("/")+1),link=document.createElement("link");link.rel="stylesheet",link.href="linkstyle.css".replace(/link/,scriptUrl).replace(/style/,o),document.head.appendChild(link)}},bar:function(){var div=panelID.byID();if(!div){this.style(),div=document.createElement("div"),div.id=panelID;var ul=document.createElement("ul");this.clean(ul),this.action(ul),this.result(ul),div.appendChild(ul),document.body.appendChild(div)}},clean:function(container){var li=document.createElement("li");li.addEventListener("click",function(e){window[os].clean(),li.classList.toggle("active")},!1),li.innerHTML="Clean",li.setAttribute("class","clean"),container.appendChild(li)},result:function(container){var li=document.createElement("li");li.addEventListener("click",function(e){window[os].result()},!1),li.innerHTML="Result",li.setAttribute("class","result"),container.appendChild(li)},action:function(container){document.body.children.each(function(i,node){var nodeName=node.nodeName;if(nodeName&&!node.hasAttribute("remove")){var li=document.createElement("li"),strong=document.createElement("strong");strong.innerHTML=nodeName,li.appendChild(strong),{get:"get"}.each(function(x,y){var span=document.createElement("span");span.addEventListener("click",function(e){window[os][x](node)},!1),span.innerHTML=y,span.title=y,li.appendChild(span)}),container.appendChild(li)}})}};return visualTask.bar(),this.help=function(){var h={help:"","clean() remove all uncessary data [remove,empty,iframe,input_stat] get() then result()":"",Clean:"os.clean();",Get:"os.get();","TagName[header,main,footer,div]":"os.get('header');",Result:"os.result();"};return window.help=Object.keys(h).join("; ").replace(/os/g,os),h.each(function(i,v){v?console.log(i.replace(/os/g,os),":",v.replace(/os/g,os)):console.log(i.replace(/os/g,os),"...")}),help},this.result=function(){var textarea=textareaID.byID();return textarea||(textarea=document.createElement("textarea"),textarea.id=textareaID,document.body.appendChild(textarea)),textarea.value=JSON.stringify(json),json.length>0?"data in Textarea":"need help?"},this.clean=function(){for(var rm="[remove],[input_stat]".byAttrNameAll(),i=rm.length-1;i>=0;i-=1)rm[i]&&rm[i].parentNode.removeChild(rm[i]);for(var ety="[empty]".byAttrNameAll(),i=ety.length-1;i>=0;i-=1)if(ety[i]){for(;ety[i].hasChildNodes();)ety[i].removeChild(ety[i].firstChild);ety[i].removeAttribute("empty")}for(var ifr="iframe".byTagName(),i=ifr.length-1;i>=0;i-=1)ifr[i]&&ifr[i].remove();return"done"},this.get=function(tag){if(tag){var element="object"==typeof tag?tag:tag.byTagName()[0];return element?json=this.dom(element):"Element not exists!".replace("Element",tag)}return"Element not specified!"},this.dom=function(element){var parser,docNode,obj={};return"string"==typeof element&&(window.DOMParser?(parser=new DOMParser,docNode=parser.parseFromString(element,"text/html")):(docNode=new ActiveXObject("Microsoft.XMLDOM"),docNode.async=!1,docNode.loadXML(element)),element=docNode.firstChild),this.objTree(element,obj),obj},this.objTree=function(el,o){var tag=el.nodeName.toLowerCase();o[tag]={};var nodeList=el.childNodes;if(null!=nodeList&&nodeList.length){o[tag].text=[];for(var i=0;i<nodeList.length;i++)3==nodeList[i].nodeType?nodeList[i].nodeValue.replace(/^\s+|\s+$/g,"").trim()&&o[tag].text.push(nodeList[i].nodeValue):(o[tag].text.push({}),this.objTree(nodeList[i],o[tag].text[o[tag].text.length-1]))}if(null!=el.attributes&&el.attributes.length){o[tag].attr={};for(var i=0;i<el.attributes.length;i++)o[tag].attr[el.attributes[i].nodeName]=el.attributes[i].nodeValue}},this}}("fileHtmltask"),Object.defineProperties(Object.prototype,{each:{value:function(callback){for(var i in this)callback(i,this[i])}},byID:{value:function(){return document.getElementById(this)}},byClass:{value:function(){return document.getElementsByClassName(this)}},byTagName:{value:function(){return document.getElementsByTagName(this)}},byAttrNameAll:{value:function(){return document.querySelectorAll(this)}},byAttrName:{value:function(){return document.querySelector(this)}}}),document.addEventListener("DOMContentLoaded",function(){new fileHtmltask("task"),task.help()});